import{r as n,j as r}from"./vendor-DhFAT8zq.js";const x=({src:a,alt:h,style:f,fallbackSrc:o,loadingOnViewport:m=!0,...e})=>{const[l,u]=n.useState(!1),[d,i]=n.useState(!1),[s,w]=n.useState(),c=n.useRef(null);return n.useEffect(()=>{if(!("IntersectionObserver"in window)){i(!0);return}if(!m){i(!0);return}const t=new IntersectionObserver(([v])=>{v.isIntersecting&&i(!0)},{root:null,rootMargin:"0px",threshold:.1}),g=c.current;return g&&t.observe(g),()=>{t.disconnect()}},[]),n.useEffect(()=>{if(!d)return;const t=new Image;return t.onload=()=>{u(!0)},t.onerror=()=>{o&&(t.src=o,t.onerror=null),u(!0)},t.src=a,w(t),()=>{t.onload=null}},[a,d,o]),r.jsx(r.Fragment,{children:r.jsxs("div",{ref:c,style:{width:e.width||"auto",height:e.height||"auto",overflow:"hidden",position:"relative",...f},className:e.className,children:[e.loading==="lazy"&&!l&&r.jsx("div",{style:{width:"300%",position:"absolute",top:0,bottom:0,backgroundColor:"#e5e5e5"},className:`${e.loading==="lazy"?e.mode==="blur"?"blur-container":"wave-container wave":""}`}),r.jsx("img",{src:s==null?void 0:s.src,alt:h,...e,style:{objectFit:e.objectfit||"cover",width:e.width||"100%",height:e.height||"100%"},hidden:e.loading==="lazy"?!l:!1})]})})};export{x as default};
